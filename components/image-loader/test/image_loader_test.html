<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Image Loader Tests</title>
    <link rel="stylesheet" href="../../../test_infra/vendor/mocha/mocha.css">
    <link rel="stylesheet" href="../../../test_infra/vendor/jscovreporter/reporter.css">
    <link rel="stylesheet" href="../../../test_infra/vendor/jscovreporter_custom/reporter.css">
    <style>
      #test_section {
        position: absolute;
        top: 0;
        width: 100%;
        height: 100px;
        overflow-y: auto;
      }

      #test_section ol {
        padding: 0;
        list-style-type: none;
        display: block;
        margin: 0 auto;
        width: 100%;
        height: 100%;
      }

      #test_section li {
        height: 150px;
      }

      #test_section li > * {
        vertical-align: middle;
        line-height: 150px;
      }
    </style>
  </head>
  <body>
    <div id="mocha"></div>
    <script src="../../../test_infra/vendor/mocha/mocha.js"></script>
    <script src="../../../test_infra/vendor/chai/chai.js"></script>

    <script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <script src="../../../test_infra/vendor/underscore/underscore-min.js"></script>
    <script src="../../../test_infra/vendor/backbone/backbone-min.js"></script>
    <script src="../../../test_infra/vendor/jscovreporter/reporter.js"></script>
    <script src="../../../test_infra/vendor/jscovreporter/JSCovReporter.js"></script>

    <script>mocha.setup('tdd'); window.assert = window.chai.assert;</script>
    <script src="../image_loader.js"></script>
    <script src="image_loader_test.js"></script>

    <script>
      // We need this for the js coverage
      window.ImageLoader = null;
    </script>

    <script src="../instrumented/image_loader.js"></script>

    <script>
      mocha.checkLeaks();
      mocha.globals(['utils', 'assert']);
      mocha.run(function () {
        new JSCovReporter({ coverObject: window.__$coverObject });
      });
    </script>
    <section id="test_section" style="visibility: hidden">
      <ol>
        <li id="i1"><span>Item 1</span><img></img></li>
        <li id="i2"><span>Item 2</span><img></img></li>
        <li id="i3"><span>Item 3</span><img></img></li>
      </ol>
      <span id="imageSrc" style="display: none">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9YGARc5KB0XV+IAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAF1JREFUGNO9zL0NglAAxPEfdLTs4BZM4DIO4C7OwQg2JoQ9LE1exdlYvBBeZ7jqch9//q1uH4TLzw4d6+ErXMMcXuHWxId3KOETnnXXV6MJpcq2MLaI97CER3N0vr4MkhoXe0rZigAAAABJRU5ErkJggg</span>
    </section>
    <div id="coverage"></div>
    <div id="menu"></div>
  </body>
</html>
